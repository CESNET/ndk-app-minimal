<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Device Tree &mdash; Minimal NDK Application Docs 1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Stratix 10 DX FPGA Development Kit" href="../../ndk_cards/dk-dev-1sdx-p/readme.html" />
    <link rel="prev" title="Build System" href="../../ofm_doc/build/readme.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Minimal NDK Application Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Application:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../app-minimal.html">Minimal NDK application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Development Kit:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intel/readme.html">NDK architecture (Intel FPGA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ofm_doc/build/readme.html">Build System</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Device Tree</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dt-integration-in-build-system">DT integration in build system</a></li>
<li class="toctree-l2"><a class="reference internal" href="#location-of-dtb-in-the-firmware">Location of DTB in the firmware</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-of-dts-of-one-component">Example of DTS of one component</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-of-generated-dts-for-fpga-card-dk-dev-1sdx-p">Example of generated DTS for FPGA card (DK-DEV-1SDX-P)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requirements-for-developers">Requirements for developers</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supported cards:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/dk-dev-1sdx-p/readme.html">Stratix 10 DX FPGA Development Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/dk-dev-agi027res/readme.html">Agilex I-Series FPGA Development Kit</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VHDL components:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ofm_doc/base.html">Basic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ofm_doc/ctrls.html">Controllers &amp; TSU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ofm_doc/mi.html">MI Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ofm_doc/mfb.html">MFB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ofm_doc/mvb.html">MVB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ofm_doc/nic.html">Network Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcie.html">PCIe Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ofm_doc/debug.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ofm_doc/ver.html">UVM Verification</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Minimal NDK Application Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Device Tree</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/ndk_core/doc/devtree.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="device-tree">
<span id="ndk-devtree"></span><h1>Device Tree<a class="headerlink" href="#device-tree" title="Permalink to this heading"></a></h1>
<p>Using <a class="reference external" href="https://www.kernel.org/doc/html/latest/devicetree/index.html">the Device Tree</a> (DT), we describe the contents of the firmware for the utility software: base addresses, versions and features of the individual components. To a certain extent, the Device Tree communicates to the user basic information about the HW platform, firmware version, etc. The Device Tree structure will be closely linked to a specific firmware - integrated inside.</p>
<section id="dt-integration-in-build-system">
<h2>DT integration in build system<a class="headerlink" href="#dt-integration-in-build-system" title="Permalink to this heading"></a></h2>
<p>There are scripts in the translation system that go through components using <code class="docutils literal notranslate"><span class="pre">Modules.tcl</span></code>. The top-level <code class="docutils literal notranslate"><span class="pre">DevTree.tcl</span></code> script (in ofm/build) first inserts general information in the form of DT-properties into the DTS framework (build time, current repository revision, author of the firmware build, etc.). Then, if it exists, it calls a function called <code class="docutils literal notranslate"><span class="pre">dts_build_project</span></code>, and it calls the <code class="docutils literal notranslate"><span class="pre">dts_build_netcope</span></code> function, which should be included in each base of the card project (typically a top-level directory with <code class="docutils literal notranslate"><span class="pre">fpga_common.vhd</span></code>). Here, the card project already ensures the insertion of specific information (eg card type) itself, including the instancing of its subcomponents (typically <code class="docutils literal notranslate"><span class="pre">dts_boot_controller</span></code>, <code class="docutils literal notranslate"><span class="pre">dts_dma_module</span></code>, <code class="docutils literal notranslate"><span class="pre">dts_application</span></code>…) and passing generics to these functions.</p>
<p>After running make (for compiling the firmware of the selected card) a file <code class="docutils literal notranslate"><span class="pre">DevTree.dts</span></code> (generated by passing TCL scripts <code class="docutils literal notranslate"><span class="pre">DevTree.tcl</span></code>) and VHDL package <code class="docutils literal notranslate"><span class="pre">DevTree.vhd</span></code> are created, which contains std_logic_vector <code class="docutils literal notranslate"><span class="pre">DTB_DATA</span></code> (which is a binary representation of compiled (<a class="reference external" href="https://github.com/dgibson/dtc/tree/main/libfdt">dtc</a>) and compressed (<a class="reference external" href="https://www.kernel.org/doc/html/latest/staging/xz.html">xz</a>) input <code class="docutils literal notranslate"><span class="pre">DevTree.dts</span></code> file). This package is used by the <code class="docutils literal notranslate"><span class="pre">PCI_EXT_CAP</span></code> component, see the next chapter.</p>
<p>Because constants in packages cannot be accessed directly in TCL, the <code class="docutils literal notranslate"><span class="pre">user_const.vhd</span></code> package files are generated by the TCL script <code class="docutils literal notranslate"><span class="pre">user_const.tcl</span></code>. This is the only way to ensure consistency in top-level generations and Device Tree descriptions. Translation scripts need <a class="reference external" href="https://github.com/dgibson/dtc/tree/main/libfdt">the dtc compiler</a> for their operation.</p>
</section>
<section id="location-of-dtb-in-the-firmware">
<h2>Location of DTB in the firmware<a class="headerlink" href="#location-of-dtb-in-the-firmware" title="Permalink to this heading"></a></h2>
<p>The DT blob is located in the PCI configuration space. A custom extension (PCIe VSEC - Vendor-Specific Extended Capability) has been created. Because the configuration space is relatively small, there are only a few control registers that make the entire DTB stored in BRAM accessible. In this way, the DTB does not load the MI bus and cannot be easily or accidentally removed from the design. You can use the dtc tool to read the complete Device Tree from the FPGA card:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># dtc -I dtb /dev/nfb0</span>
</pre></div>
</div>
</section>
<section id="example-of-dts-of-one-component">
<h2>Example of DTS of one component<a class="headerlink" href="#example-of-dts-of-one-component" title="Permalink to this heading"></a></h2>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span>/*
 * ref_name:   instance name, typically populated by the parent module when needed
 *             get reference to the installed component (can be empty)
 * my_comp:    component name, populates the dts_my_comp function
 * reg:        component address space
 *             - the first value indicates the base address on the MI,
 *             - the second value indicates the internal space size used
 * compatible: a driver submodule or software tool is bound to this string
 *             There must be a node specification for a specific compatible string:
 *             - properties and subnode names
 *             - their types and connection to HW functionality
 *             - mandatory or optional items
 *             no SW tool works directly with node without compatible property
 * version:    version of the component in terms of SW interface (register functions)
 * type:       additional / optional property
 *             - can specify large changes in the component
 *             - possibly extends the property compatible
 * others:     other properties / subnodes that the software can use
*/

ref_name: my_comp {
    reg = &lt;$BASE_ADDRESS 0x40&gt;;
    compatible = &quot;netcope,my_comp&quot;;
    version = &lt;0x00010004&gt;;
    type = &quot;reduced&quot;;
};
</pre></div>
</div>
</section>
<section id="example-of-generated-dts-for-fpga-card-dk-dev-1sdx-p">
<h2>Example of generated DTS for FPGA card (DK-DEV-1SDX-P)<a class="headerlink" href="#example-of-generated-dts-for-fpga-card-dk-dev-1sdx-p" title="Permalink to this heading"></a></h2>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span>/dts-v1/;

/ {

    firmware {
        build-tool = &quot;Quartus $quartus(version)&quot;;
        build-author = &quot;cabal@cesnet.cz&quot;;
        build-revision = &quot;ff3f73b&quot;;
        build-time = &lt;0x6143474c&gt;;
        card-name = &quot;DK-DEV-1SDX-P&quot;;
        project-name = &quot;DK-DEV-1SDX-P&quot;;

        mi0: mi_bus0 {
            #address-cells = &lt;0x01&gt;;
            #size-cells = &lt;0x01&gt;;
            compatible = &quot;netcope,bus,mi&quot;;
            resource = &quot;PCI0,BAR0&quot;;
            width = &lt;0x20&gt;;

            tsu: tsu {
                compatible = &quot;netcope,tsu&quot;;
                reg = &lt;0x4000 0x1000&gt;;
                type = &lt;0x01&gt;;
                version = &lt;0x01&gt;;
            };

            dma_module@0x01000000 {
                #address-cells = &lt;0x01&gt;;
                #size-cells = &lt;0x01&gt;;

                dma_ctrl_ndp_rx0 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000000 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_rx1 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000080 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_rx2 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000100 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_rx3 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000180 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_rx4 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000200 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_rx5 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000280 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_rx6 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000300 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_rx7 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000380 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_tx0 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200000 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_tx1 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200080 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_tx2 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200100 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_tx3 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200180 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_tx4 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200200 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_tx5 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200280 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_tx6 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200300 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };

                dma_ctrl_ndp_tx7 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200380 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x00&gt;;
                };
            };

            i2c0: i2c0 {
                compatible = &quot;netcope,i2c&quot;;
                reg = &lt;0x800010 0x08&gt;;
                phandle = &lt;0x01&gt;;
            };

            pmd0: pmd0 {
                compatible = &quot;netcope,transceiver&quot;;
                type = &quot;QSFP&quot;;
                control = &lt;0x01&gt;;
                phandle = &lt;0x02&gt;;

                control-param {
                    i2c-addr = &lt;0xf0&gt;;
                };
            };

            txmac0: txmac0 {
                compatible = &quot;netcope,txmac&quot;;
                type = &quot;tx_mac_lite&quot;;
                speed = &quot;100&quot;;
                version = &lt;0x02&gt;;
                reg = &lt;0x8000 0x200&gt;;
                mtu = &lt;0x3fff&gt;;
                phandle = &lt;0x04&gt;;
            };

            rxmac0: rxmac0 {
                compatible = &quot;netcope,rxmac&quot;;
                type = &quot;rx_mac_lite&quot;;
                speed = &quot;100&quot;;
                version = &lt;0x02&gt;;
                reg = &lt;0x8200 0x200&gt;;
                mtu = &lt;0x3fff&gt;;
                phandle = &lt;0x03&gt;;
            };

            eth0 {
                compatible = &quot;netcope,eth&quot;;
                pmd = &lt;0x02&gt;;
                rxmac = &lt;0x03&gt;;
                txmac = &lt;0x04&gt;;
            };

            i2c1: i2c1 {
                compatible = &quot;netcope,i2c&quot;;
                reg = &lt;0x800110 0x08&gt;;
                phandle = &lt;0x05&gt;;
            };

            pmd1: pmd1 {
                compatible = &quot;netcope,transceiver&quot;;
                type = &quot;QSFP&quot;;
                control = &lt;0x05&gt;;
                phandle = &lt;0x06&gt;;

                control-param {
                    i2c-addr = &lt;0xf8&gt;;
                };
            };

            txmac1: txmac1 {
                compatible = &quot;netcope,txmac&quot;;
                type = &quot;tx_mac_lite&quot;;
                speed = &quot;100&quot;;
                version = &lt;0x02&gt;;
                reg = &lt;0xa000 0x200&gt;;
                mtu = &lt;0x3fff&gt;;
                phandle = &lt;0x08&gt;;
            };

            rxmac1: rxmac1 {
                compatible = &quot;netcope,rxmac&quot;;
                type = &quot;rx_mac_lite&quot;;
                speed = &quot;100&quot;;
                version = &lt;0x02&gt;;
                reg = &lt;0xa200 0x200&gt;;
                mtu = &lt;0x3fff&gt;;
                phandle = &lt;0x07&gt;;
            };

            eth1 {
                compatible = &quot;netcope,eth&quot;;
                pmd = &lt;0x06&gt;;
                rxmac = &lt;0x07&gt;;
                txmac = &lt;0x08&gt;;
            };

            adc_sensors {
                reg = &lt;0x1000 0x7c&gt;;
                compatible = &quot;netcope,stratix_adc_sensors&quot;;
            };

            app: nic_application {
                reg = &lt;0x2000000 0x10&gt;;
            };
        };

        mi1: mi_bus1 {
            #address-cells = &lt;0x01&gt;;
            #size-cells = &lt;0x01&gt;;
            compatible = &quot;netcope,bus,mi&quot;;
            resource = &quot;PCI1,BAR0&quot;;
            width = &lt;0x20&gt;;

            dma_module@0x01000000 {
                #address-cells = &lt;0x01&gt;;
                #size-cells = &lt;0x01&gt;;

                dma_ctrl_ndp_rx0 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000000 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_rx1 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000080 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_rx2 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000100 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_rx3 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000180 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_rx4 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000200 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_rx5 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000280 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_rx6 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000300 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_rx7 {
                    compatible = &quot;netcope,dma_ctrl_ndp_rx&quot;;
                    reg = &lt;0x1000380 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_tx0 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200000 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_tx1 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200080 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_tx2 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200100 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_tx3 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200180 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_tx4 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200200 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_tx5 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200280 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_tx6 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200300 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };

                dma_ctrl_ndp_tx7 {
                    compatible = &quot;netcope,dma_ctrl_ndp_tx&quot;;
                    reg = &lt;0x1200380 0x80&gt;;
                    version = &lt;0x20000&gt;;
                    pcie = &lt;0x01&gt;;
                };
            };
        };
    };
};
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The phandle is a unique identifier of the (parent) node within one DTS. With this mechanism, nodes can be referenced in any properties.</p>
</div>
</section>
<section id="requirements-for-developers">
<h2>Requirements for developers<a class="headerlink" href="#requirements-for-developers" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>Requirements for SW developers:</dt><dd><ul>
<li><p>The developer must know the basic structure of the Device Tree.</p></li>
<li><p>Must be familiar with the functions of the libfdt library.</p></li>
<li><p>Must know the DT node specification of the component for which the utility software writes.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Requirements for HW developers:</dt><dd><ul>
<li><p>The developer must know the basic syntax of DTS to implement the unique <code class="docutils literal notranslate"><span class="pre">dts_my_comp</span></code> function for his component.</p></li>
<li><p>Specifies a compatible string, ie creates a description of each “property” (or “subnode”) of the Device Tree for the SW developer so that the control software can write according to them.</p></li>
<li><p>It must take into account any generic parameters that change the MI address space of a component or the function of its registers. Such parameters and features must be included in the DTS so that the utility software can work with it properly.</p></li>
<li><p>Generics that do not change the address space should not be included in the component’s DTS node. Component modifications and bug fixes that do not change the address space should also not be included in the DT description, because they can be found from the revision (which is one of the basic properties of the DT project). However, it is possible to consider, for example, to increase the minor version number, if the property version is present.</p></li>
<li><p>Implements <code class="docutils literal notranslate"><span class="pre">dts_my_comp</span></code> ideally as a function in <code class="docutils literal notranslate"><span class="pre">DevTree.tcl</span></code>, which is implemented using <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">$ENTITY_BASE/DevTree.tcl</span></code> in <code class="docutils literal notranslate"><span class="pre">Modules.tcl</span></code>. It is necessary to comment well on the input parameters and inform about the default values.</p></li>
<li><p>When changing a generic that changes the address space, the developer must also update the DT description of the component or the DT description specification. Changes to the VHDL generic and its default values ​​must match the values ​​in the DT description. Otherwise, it is a bug in the firmware.</p></li>
<li><p>If it instantiates a subcomponent in its component that contains another <code class="docutils literal notranslate"><span class="pre">dts_my_comp</span></code> function, it should include (call) it in its description as well. In this case, it must correctly pass the base addresses and all other generics required by the <code class="docutils literal notranslate"><span class="pre">dts_my_comp</span></code> function. This is especially important for a top-level project where the main components are installed.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../ofm_doc/build/readme.html" class="btn btn-neutral float-left" title="Build System" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../ndk_cards/dk-dev-1sdx-p/readme.html" class="btn btn-neutral float-right" title="Stratix 10 DX FPGA Development Kit" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, CESNET z.s.p.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>